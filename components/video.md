# Video Player

<style> 
    .markdown-section h3 ~ p > strong > a { color: crimson; font-size: 110%; text-decoration: none; }
    .markdown-section table { 
        margin-left:3rem; 
        width: calc(100% - 6rem); 
        border:1px solid #555;
    }
    .markdown-section td, .markdown-section th {
        border:1px solid #555;
        padding: 8px;
        line-height: 1.2;
    }
    .markdown-section th {
        background-color:#E2F0F7;
        font-weight:bold !important;
        text-align:center !important;
    }
</style>

The `.ve-media` tag is the most commonly used essay tag.  The tag creates a viewer that is able to display IIIF images, video, and audio. The viewer can also be used to display streamed videos from YouTube and Vimeo.

The Media viewer covers a lot of needs and can display images, video (including streaming video from YouTube and Vimeo), and audio.  The Media viewer exclusively uses IIIF resources for images, audio, and non-streaming video.

The [Media Resources](/resources/media) page provides information for finding and using media content from a variety of sources.  This includes links to sites that expose IIIF content directly, sites for which Juncture is able to dynamically create IIIF wrappers for hosted resources, and information on creating and using personal media collections hosted in Github.

## IIIF Manifest URLs

With the exception of YouTube and Vimeo streaming video sources, all resource URLs must reference an IIIF presentation manifest that is compliant with version 2.x or version 3.0 of the IIIF Presentation Standard.  Many websites provide IIIF manifest URLs that can be used directly in a `src` attribute or image list ([in multi-image mode](#multiple-images-mode)).  For some other popular hosting sites, Juncture can automatically create IIIF manifests.  The automatic manifest generation occurs when Juncture encounters a short-form URL with a recognized source prefix.  While a short-form resource URL can be manually entered into the Juncture essay definition text file, this is more easily accomplished when using copy-paste or drag-and-drop to copy a resource from a supported hosting site into the Juncture editor.  The page [IIIF Resources](/iiif-resources) page provides more information on locating and using IIIF resources. 

When referring to a manifest that is automatically generated by Juncture, a short-form version of the auto-generated URL may be used.  The short-form version takes the form of `<SOURCE>:<SOURCE_ID>`, where `<SOURCE>` is the site code for one of the hosting sites supporting manifest generation by Juncture.  The `<SOURCE_ID>` value is a unique resource ID applicable to the site.  For example, Juncture can automatically generate IIIF manifests for images and other media hosted on [Wikimedia Commons](https://commons.wikimedia.org/wiki/Main_Page).  A full auto-generated manifest for the image at [https://commons.wikimedia.org/wiki/File:Sunflower.jpg](https://commons.wikimedia.org/wiki/File:Sunflower.jpg){target=_blank} would be [https://iiif.juncture-digital.org/wc:Sunflow.jpg/manifest.json](https://iiif.juncture-digital.org/wc:Sunflow.jpg/manifest.json).  The short form version of this URL (**wc:Sunflower.jpg**) can be used with any Juncture tag (.ve-media, .ve-header, and others) that accept IIIF manifest attributes.

## Image modes

The `.ve-media` viewer supports multiple modes of operation for images.  The default mode is to render a single image with full deep-zoom and panning enabled.

### Single image mode

By default, the `.ve-media` viewer will render an image with full deep-zoom and panning enabled.  An alternative to this is to use the `static` attribute to render the image with the interaction features disabled.  Static mode offers some performance advantages and additional image formatting options.  Clicking on an image in static mode will display a popup window with the same image displayed with deep-zoom and panning enabled.

The example below demonstrates the use of the .ve-media viewer with the same image in static and dynamic modes.  In both cases, the caption bar and information popover are rendered in the same way.  The core difference is in how the image is displayed in the viewer pane.  In the dynamic version hovering over the image will reveal the image controls in the top-left portion of the viewer pane.  These controls allow the image to be zoomed and rotated.  The mouse and/or keyboard can be used to pan the image.  In the viewer with the static image these controls are not available.  However, in static mode, clicking on the image will cause the image to be redisplayed in a modal window.  The image viewer in the modal window displays the image in dynamic mode with zooming, panning, and rotation enabled.

<ve-snippet collapsible label="Static vs dynamic images">
.ve-media wc:The_Bug_Peek.jpg left caption="Dynamic image"
.ve-media wc:The_Bug_Peek.jpg right static caption="Static image"
</ve-snippet>

### Multiple images mode

To use more than one image with a `.ve-media` tag the Markdown nested list notation is used.  A Markdown list is defined by prefixing the `    - ` text to each list element on separate lines.   Each list element can include positional and/or key-value attributes for the associated image.

In multi-image mode, all images are rendered as static images.

## Attributes

### Resource attributes

**[src](#basic)** (_url_) :  The URL to the IIIF manifest for the item to display in the viewer.  This attribute is omitted when using the viewer in multi-image mode.  This attribute may also be omitted in single-image mode when QIDs are in scope.  When a src attribute is not specified the most relevant (closest) QID to the tag is used to generate an IIIF manifest URL.  More information on QID use can be found in the [Wikidata](#wikidata) section.

**[alt](#basic)** (_string_):  The text to use in the _alt_ tag used by screen readers.  If not provided an _alt_ tag is automatically generated from the manifest label property.

**[caption](#basic)** (_string_):  When a single image is defined using the `src` attribute a caption is automatically generated using the label property found in the associated IIIF manifest.  This caption is displayed in the caption bar at the bottom of the viewer by default (this can be inhibited by adding a `no-caption` attribute).  Specifying a caption in single-image mode will override this with the value provided in this attribute.  In all other viewer modes (multi-image, audio, and video) no caption is displayed in the caption bar.  Defining a caption with this attribute will cause the caption bar to be displayed with the provided text.

### Viewer positioning attributes

**[left](/styling/viewer-positioning)** (_boolean_):  Position the viewer in the left half of the viewport and scale the width proportionally.  Text will wrap around the viewer unless the _sticky_ attribute is included.

**[right](/styling/viewer-positioning)** (_boolean_):  Position the viewer in the right half of the viewport and scale the width proportionally. Text will wrap around the viewer unless the _sticky_ attribute is included.

**[full](/styling/viewer-positioning)** (_boolean_):  Use the fill width of the browser viewport for the image.  Scale the image height proportional to the source image.  By default, the image will be auto-sized such that its height is not more than 40% of the viewport height.

**[sticky](/styling/viewer-positioning)** (_boolean_):  The _sticky_ attribute causes the viewer to "stick" to the top of the viewing area when the essay text is scrolled.  The viewer will stick in position until all content in the enclosing section has scrolled through the viewing area.

**[height](/styling/viewer-positioning)** (_string_):  A requested size for the  viewer height.  The default behavior is to use the full width of the available window and scale the viewer height to retain the aspect ratio of the source item (image or video).

**[width](/styling/viewer-positioning)** (_string_):  A requested size for the  viewer width.  The default behavior is to use the full width of the available window.

### Image attributes

Many of the image-specific attributes used in the .ve-media viewer are based on the [IIIF Image API](https://iiif.io/api/image/2.1/).  The attribute values are often directly passed to the IIIF server hosting the images.  For detailed explanations of the attributes and possible values, the [IIIF image request parameters](https://iiif.io/api/image/2.1/#image-request-parameters) documentation should be consulted.

**[static](static-images)** (_boolean_):  A static image is returned instead of an interactive image with deep-zoom and panning.

**[seq](#basic)** (_number_):  A number defining the image to use in a multi-image manifest.  If not specified the default value is _1_.

**[fit](#basic)** (_string_):  The _fit_ attribute controls the display of an image in the viewer viewport.  In the default mode (_contain_) the entire image is shown with letter boxing applied to the top and bottom or left and right when the image aspect ratio differs from the viewer.  When the value _cover_ is used the entire viewport is filled and the displayed portion of the image is cropped as needed to fit.

**[rotation](#basic)** (_number_):  The rotation attribute specifies mirroring and rotation. A leading exclamation mark (“!”) indicates that the image should be mirrored by reflection on the vertical axis before any rotation is applied. The numerical value represents the number of degrees of clockwise rotation, and may be any floating point number from 0 to 360.

### Static image attributes

The following attributes are only applicable for single images in `static` mode or for images in a multi-image mode (`grid` or `compare`).

**[region](#static-images)** (_string_):  The region attribute defines the rectangular portion of the full image to be returned. The region can be specified by pixel coordinates, percentage, or by the value “full”, which specifies that the entire image should be returned.

| Form | Description |
| -------- | ---------------------------------------- |
| full        | The complete image is returned, without any cropping. |
| square      | The region is defined as an area where the width and height are both equal to the length of the shorter dimension of the complete image. The region may be positioned anywhere in the longer dimension of the image content at the server’s discretion, and centered is often a reasonable default. |
| x,y,w,h     | The region of the full image to be returned is specified in terms of absolute pixel values. The value of x represents the number of pixels from the 0 position on the horizontal axis. The value of y represents the number of pixels from the 0 position on the vertical axis. Thus the x,y position 0,0 is the upper left-most pixel of the image. w represents the width of the region and h represents the height of the region in pixels. |
| pct:x,y,w,h | The region to be returned is specified as a sequence of percentages of the full image’s dimensions, as reported in the image information document. Thus, x represents the number of pixels from the 0 position on the horizontal axis, calculated as a percentage of the reported width. w represents the width of the region, also calculated as a percentage of the reported width. The same applies to y and h respectively. These may be floating point numbers. |

**[size](#static-images)** (_string_):  The size parameter determines the dimensions to which the extracted region is to be scaled.

| Form | Description |
| -------- | ---------------------------------------- |
| full  | The image or region is not scaled, and is returned at its full size. |
| max   | The image or region is returned at the maximum size available, as indicated by maxWidth, maxHeight, maxArea in the profile description. This is the same as full if none of these properties are provided. |
| w,    | The image or region should be scaled so that its width is exactly equal to w, and the height will be a calculated value that maintains the aspect ratio of the extracted region. |
| ,h    | The image or region should be scaled so that its height is exactly equal to h, and the width will be a calculated value that maintains the aspect ratio of the extracted region. |
| pct:n |   The width and height of the returned image is scaled to n% of the width and height of the extracted region. The aspect ratio of the returned image is the same as that of the extracted region. |
| w,h   |The width and height of the returned image are exactly w and h. The aspect ratio of the returned image may be different than the extracted region, resulting in a distorted image. |
| !w,h  | The image content is scaled for the best fit such that the resulting width and height are less than or equal to the requested width and height. The exact scaling may be determined by the service provider, based on characteristics including image quality and system performance. The dimensions of the returned image content are calculated to maintain the aspect ratio of the extracted region. |

**[quality](#static-images)** (_string_):  The quality attribute determines whether the image is delivered in color, grayscale or black and white.  Recognized values for this attribute are `color`, `gray`, `bitonal`, `default`.  The default value used by the Juncture IIIF image server is `color`.

| Value | Description |
| -------- | ---------------------------------------- |
| color   | The image is returned in full color. |
| gray    | The image is returned in grayscale, where each pixel is black, white or any shade of gray in between. |
| bitonal | The image returned is bitonal, where each pixel is either black or white. |
| default | The image is returned using the server’s default quality (e.g. color, gray or bitonal) for the image. |

**[options](#static-images)** (_string_):  The _options_ attribute combines the `region`, `size`, `rotation`, `quality`, and `format` attributes into a single value.  

### Multi-image mode attributes

These attributes are applicable when multiple images are defined in a Markdown list following the `.ve-media` tag.  When exactly 2 images are defined in the list the default mode is `compare`.  When more than 2 are defined the default mode is `grid`.  In most cases using a `grid` or `compare` attribute is not necessary as the default behavior is usually what is desired.  The exception would be using a `grid` attribute to override the default compare behavior when 2 images are defined.

**[compare](#multiple-images)** (_boolean_):  The compare attribute is used to compare 2 images.  In compare mode, the 2 images are stacked (one is overlaid on the other) and a slider is used to show or hide portions of the bottom image.  The compared images cannot be zoomed or panned but one or both may be cropped to align the images for comparison.

**[grid](#multiple-images)** (_boolean_):  Displays multiple images in a responsive grid. When clicked the images will create a popup window with full deep zoom and panning enabled. 

**[cards](#multiple-images)** (_boolean_):  The cards attribute is a modifier that can be used with the grid attribute.  By default, only image thumbnails are displayed in multi-image grid mode.  When the cards modifier attribute is included the images are displayed in a card layout that includes the image thumbnail, label, and description.

### Audio and video attributes

**[autoplay](#audio-and-video)** (_boolean_):  Automatically play audio/video resource when the media viewer is loaded.

**[muted](#audio-and-video)** (_boolean_):  Mute resource when initially played.

**[start](#audio-and-video)** (_number_):  Time position to begin playing resource.

**[end](#audio-and-video)** (_number_): Time position to stop playing resource.

**[poster](#audio-and-video)** (_string_): Image displayed in viewer before video plays.


### Viewer attributes

**[no-caption](#basic)** (_boolean_):  This attribute inhibits the display of the caption at the bottom of the viewer.

**[no-info-icon](#basic)** (_boolean_):  This attribute inhibits the display of the icon used to trigger the display of the information popup.  By default, the icon is displayed in the top-right region of the viewer when hovering over the viewing area.

**[zoom-on-scroll](#basic)** (_boolean_):  Specifies whether the viewer will zoom the image when a scroll gesture is performed in the image viewer.  This is inhibited by default.

## Examples

### Basic

<ve-snippet collapsible label="Image with defaults">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg
</ve-snippet>

<ve-snippet collapsible label="Full-width image with rotation">
.ve-media wc:Sunflower.jpg rotation=90
</ve-snippet>

The example below includes 2 .ve-image viewers displaying the same image from Wikimedia Commons.  The first viewer uses the full manifest URL.  The second uses the short-form support by the Juncture IIIF server. 

<ve-snippet collapsible label="Images with full and short-form IIIF URLs">
.ve-media https://iiif.juncture-digital.org/wc:Sunflower.jpg/manifest.json left
.ve-media wc:Sunflower.jpg right
</ve-snippet>

The example below includes 2 renderings of the same image, a normal (uncropped) rendering, and a cropped version using the `region` attribute.  The cropped version also shows the use of a custom caption.

<ve-snippet collapsible label="Cropped image using region">
.ve-media wc:Sunflower.jpg left
.ve-media wc:Sunflower.jpg right region=pct:25,25,50,50 caption="Sunflower, cropped"
</ve-snippet>

### Static images

<ve-snippet collapsible label="Static image">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg static
</ve-snippet>

<ve-snippet collapsible label="Static image in grayscale">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg static quality=gray
</ve-snippet>

<ve-snippet collapsible label="Static image cropped using region attribute">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg static region=3801,5853,7002,5553
</ve-snippet>

<ve-snippet collapsible label="Static image mirrored">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg static rotation=!0
</ve-snippet>

In the example below the options attribute is used to format a static image.  In this example, the image is cropped, rotated, and displayed in grayscale.

<ve-snippet collapsible label="Static image using options attribute">
.ve-media wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg static options=3801,5853,7002,5553/full/90/gray
</ve-snippet>

### Multiple images

<ve-snippet collapsible label="2 images in compare mode">
.ve-media
    - wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg
    - wc:Vincent_van_Gogh_-_Vincent's_Bedroom_in_Arles_-_Letter_Sketch_October_1888.jpg
</ve-snippet>

<ve-snippet collapsible label="2 images in grid mode">
.ve-media grid
    - wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg
    - wc:Vincent_van_Gogh_-_Vincent's_Bedroom_in_Arles_-_Letter_Sketch_October_1888.jpg
</ve-snippet>

<ve-snippet collapsible label="2 images in cards mode">
.ve-media grid cards
    - wc:Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg
    - wc:Vincent_van_Gogh_-_Vincent's_Bedroom_in_Arles_-_Letter_Sketch_October_1888.jpg
</ve-snippet>

### Audio and video

<ve-snippet collapsible label="YouTube video">
.ve-media https://www.youtube.com/watch?v=Zy3K2Lcw7hQ
</ve-snippet>

<ve-snippet collapsible label="YouTube video with autoplay">
.ve-media https://www.youtube.com/watch?v=Zy3K2Lcw7hQ autoplay
</ve-snippet>

<ve-snippet collapsible label="YouTube video with autoplay and start/end times">
.ve-media https://www.youtube.com/watch?v=Zy3K2Lcw7hQ autoplay start=60 end=70
</ve-snippet>

### Viewer positioning

Viewer positioning examples can be found [here](/styling/viewer-positioning)

